<!DOCTYPE html>
<html>

<head>
<link rel "stylesheet" href="https://pyscript.net/alpha/pyscript.css" />
<script defer src="https://pyscript.net/alpha/pyscript.js"></script>
</head>
<body>
<py-script>
print("Direct questions to reported questions translator v.1.0.4")
sentence = input("Enter the sentence: ")
wordlist = sentence.split()
wordlist.insert(0, "They")
wordlist.insert(1, "asked")
tense = "present"
questiontype = "yes-no"
try:
    verb = [*wordlist[4]]
except IndexError:
    pass
lastword = [*wordlist[-1]]
irregular = ["am", "is", "are", "was", "were", "beat", "become", "begin", "bend", "bet", "bite", "bleed", "blow", "break", "breed", "bring", "build", "burn", "buy", "catch", "choose", "come", "cost", "cut", "do", "don't", "didn't", "doesn't", "dig", "draw", "dream", "drink", "drive", "eat", "fall", "feed", "feel", "fight", "find", "fly", "forget", "forgive", "freeze", "get", "give", "go", "grow", "have", "has", "had", "hear", "hide", "hit", "hold", "hurt", "keep", "know", "lay", "lead", "lean", "leave", "lend", "let", "lose", "make", "mean", "meet", "pay", "put", "quit", "read", "ride", "ring", "rise", "run", "say", "see", "sell", "send", "set", "shake", "shine", "shoe", "shoot", "shrink", "shut", "sing", "sink", "sit", "sleep", "speak", "spend", "spill", "spread", "speed", "stand", "steal", "stick", "sting", "stink", "swear", "sweep", "swim", "swing", "take", "teach", "tear", "tell", "think", "throw", "understand", "wake", "wear", "win", "write"]
whwords = ["what", "What", "which", "Which", "How", "how", "When", "when", "Who", "who", "Why", "why", "Where", "where", "Whose", "whose", "Whom", "whom" ]
determiners = ["a", "an", "the", "this", "that", "these", "those", "my", "your", "his", "her", "its", "our", "their", "whose", "some", "any", "many", "few", "several", "all", "much", "little", "enough", "each", "every", "either", "neither", "no", "neither", "one", "two", "three", "four", "five", "six", "seven", "eight", "nine", "ten", "A", "An", "The", "This", "That", "These", "Those", "My", "Your", "His", "Her", "Its", "Our", "Their", "Whose", "Some", "Any", "Many", "Few", "Several", "All", "Much", "Little", "Enough", "Each", "Every", "Either", "Neither", "No", "Neither", "One", "Two", "Three", "Four", "Five", "Six", "Seven", "Eight", "Nine", "Ten"]
modals = ["Will", "will", "Would", "would", "May", "may", "Might", "might", "Must", "must", "Shall", "shall", "Should", "should", "Can", "can", "Could", "could", "Won't", "won't", "Wouldn't", "wouldn't", "Mayn't", "mayn't", "Mightn't", "mightn't", "Mustn't", "mustn't", "Shan't", "shan't", "Shouldn't", "shouldn't", "Can't", "can't", "Couldn't", "couldn't", "Haven't", "haven't", "Hadn't", "Hasn't", "hasn't", "hadn't", "Don't", "don't", "Doesn't", "doesn't", "Didn't", "didn't", "Weren't", "weren't", "Wasn't", "wasn't"]
can_Add_participle_termination = True
single_wh_word = False
participles = {
    "beat": "beaten",
    "begin": "begun",
    "bend": "bent",
    "bite": "bitten",
    "bleed": "bled",
    "blow": "blown",
    "break": "broken",
    "breed": "bred",
    "bring": "brought",
    "build": "built",
    "burn": "burnt",
    "buy": "bought",
    "choose": "chosen", 
    "do": "done",
    "dig": "dug",
    "draw": "drawn",
    "dream": "dreamt",
    "drink": "drunk",
    "drive": "driven",
    "eat": "eaten",
    "feed": "fed",
    "feel": "felt",
    "fall": "fallen",
    "fight": "fought",
    "find": "found",
    "fly": "flown",
    "forget": "forgotten",
    "forgive": "forgiven",
    "freeze": "frozen",
    "get": "got",
    "give": "given",
    "go": "gone",
    "grow": "grown",
    "hear": "heard",
    "hold": "held",
    "hide": "hidden",
    "keep": "kept",
    "know": "known",
    "lay": "laid",
    "lead": "led",
    "lean": "lent",
    "leave": "left",
    "lose": "lost",
    "make": "made",
    "mean": "meant",
    "meet": "met",
    "pay": "paid",
    "ride": "ridden",
    "ring": "rung",
    "rise": "risen",
    "say": "said",
    "see": "seen",
    "sell": "sold",
    "send": "sent",
    "sew": "sewn",
    "shake": "shaken",
    "shine": "shone",
    "shoe": "shod",
    "shoot": "shot",
    "show": "shown",
    "shrink": "shrunk",
    "sing": "sung",
    "sink": "sunk",
    "sit": "sat",
    "sleep": "slept",
    "speak": "spoken",
    "spend": "spent",
    "spill": "spilt",
    "speed": "sped",
    "stand": "stood",
    "stick": "stuck",
    "sting": "stung",
    "stink": "stunk",
    "steal": "stolen",
    "stink": "stunk",
    "swear": "sworn",
    "sweep": "swept",
    "swim": "swum",
    "swing": "swung",
    "take": "taken",
    "teach": "taught",
    "tear": "torn",
    "tell": "told",
    "think": "thought",
    "throw": "thrown",
    "understand": "understood",
    "wake": "woken",
    "wear": "worn",
    "win": "won",
    "write": "written",
}
irregular_past = {
    "become": "became",
    "begin": "began",
    "bend": "bent",
    "bite": "bit",
    "bleed": "bled",
    "blow": "blew",
    "break": "broke",
    "breed": "bred",
    "bring": "brought",
    "build": "built",
    "burn": "burnt",
    "buy": "bought",
    "catch": "caught",
    "choose": "chose",
    "come": "came",
    "do": "did",
    "dig": "dug",
    "draw": "drew",
    "dream": "dreamt",
    "drink": "drank",
    "drive": "drove",
    "eat": "ate",
    "fall": "fell",
    "feed": "fed",
    "feel": "felt",
    "fight": "fought",
    "find": "found",
    "fly": "flew",
    "forget": "forgot",
    "forgive": "forgave",
    "freeze": "froze",
    "get": "got",
    "give": "gave",
    "go": "went",
    "grow": "grew",
    "have": "had",
    "hear": "heard",
    "hide": "hid",
    "hold": "held",
    "keep": "kept",
    "know": "knew",
    "lay": "laid",
    "lead": "led",
    "lean": "leant",
    "leave": "left",
    "lend": "lent",
    "lose": "lost",
    "make": "made",
    "mean": "meant",
    "meet": "met",
    "pay": "paid",
    "ride": "rode",
    "ring": "rang",
    "rise": "rose",
    "run": "ran",
    "say": "said",
    "see": "saw",
    "sell": "sold",
    "send": "sent",
    "shake": "shook",
    "shine": "shone",
    "shoe": "shod",
    "shoot": "shot",
    "shrink": "shrank",
    "sing": "sang",
    "sink": "sank",
    "sit": "sat",
    "sleep": "slept",
    "speak": "spoke",
    "spend": "spent",
    "spill": "spilt",
    "speed": "sped",
    "stand": "stood",
    "steal": "stole",
    "stick": "stuck",
    "sting": "stung",
    "stink": "stank",
    "swear": "swore",
    "sweep": "swept",
    "swim": "swam",
    "swing": "swung",
    "take": "took",
    "teach": "taught",
    "tear": "tore",
    "tell": "told",
    "think": "thought",
    "throw": "threw",
    "understand": "understood",
    "wake": "woke",
    "wear": "wore",
    "win": "won",
    "write": "wrote"
}
if lastword[-1] != "?" and wordlist[-1] != "asked":
    print("Invalid sentence.")
    exit()
elif wordlist[-1] != "asked":
    lastword.remove(lastword[-1])
    wordlist[-1] = ''.join(lastword)
if wordlist[-1] == "asked":
    wordlist[0] = wordlist[-2].capitalize()
    wordlist.pop()
    wordlist.pop()
    temp_word = wordlist[2]
    wordlist[2] = temp_word[1:]
    temp_word = wordlist[-1]
    wordlist[-1] = temp_word[:-1]
    temp_word = wordlist[-1]
    wordlist[-1] = temp_word[:-1]
    temp_word = wordlist[-1]
    wordlist[-1] = temp_word[:-1]
if len(wordlist) == 3 and wordlist[2] in whwords:
    wordlist.append("")
    single_wh_word = True
for i in range(len(wordlist)):
    try:
        if wordlist[i] == "I" or wordlist[i] == "we":
            if wordlist[0] != "You":
                wordlist[i] = "they"
            else:
                wordlist[i] = "you"
        if wordlist[i] == "me" or wordlist[i] == "us":
            if wordlist[0] != "You":
                wordlist[i] = "them"
            else:
                wordlist[i] = "you"
        if wordlist[i] == "this":
            wordlist[i] = "that"
        if wordlist[i] == "these":
            wordlist[i] = "those"
        if wordlist[i] == "you" and wordlist[0] != "You" and i<3:
            wordlist[i] = "me"
        if wordlist[i] == "you" and wordlist[0] != "You":
            if i>3 or i==3:
                wordlist[i] = "I"
        if wordlist[i] == "my":
            wordlist[i] = "their"
        if wordlist[i] == "your":
            wordlist[i] = "my"
        if wordlist[i] == "we":
            wordlist[i] = "they"
        if wordlist[i] == "me" and wordlist[i+1] == "all" and i<3:
            wordlist[i] = "us"
            wordlist.remove(wordlist[i+1])
        if wordlist[i] == "I" and wordlist[i+1] == "all":
            if i>3 or i==3:
                wordlist[i] = "we"
                wordlist.remove(wordlist[i+1])
    except IndexError:
        pass
for i in range(len(wordlist) - 1):
    if wordlist[i] == "You" and wordlist[i+1] == "all" or wordlist[i] == "you" and wordlist[i+1] == "all":
        wordlist[i] = "you all"
        wordlist.remove(wordlist[i+1])
if wordlist[2] in whwords:
    questiontype = "wh"
    wordlist[2] = wordlist[2].lower()
    verb = [*wordlist[3]]
    if wordlist[3] == "Do" or wordlist[3] == "do" or wordlist[3] == "Does" or wordlist[3] == "does":
        wordlist.remove(wordlist[3])
        verb = [*wordlist[4]]
    if wordlist[3] == "Did" or wordlist[3] == "did":
        wordlist.remove(wordlist[3])
        wordlist.insert(4, "had")
        tense = "past"
    if wordlist[3] == "Didn't" or wordlist[3] == "didn't":
        wordlist.remove(wordlist[3])
        wordlist.insert(4, "hadn't")
        tense = "past"
    if wordlist[3] == "was" or wordlist[3] == "were":
        del wordlist[3]
        tense = "pastcontinuous"
    if wordlist[3].endswith("ed"):
        wordlist[3] = "had " + wordlist[3]
        tense = "past_who"
    if wordlist[3] == "has":
        wordlist[3] = "had"
        tense = "perfect_who"
    if verb == [*wordlist[3]] and verb[-1] == "s" and verb[-2] != "s" and wordlist[3] not in irregular:
        can_Add_participle_termination = False
        tense = "present_who"
        del verb[-1]
        verb = "".join(verb)
        wordlist[3] = verb
        if wordlist[3] in irregular_past:
            wordlist[3] = irregular_past[wordlist[3]]
        elif wordlist[3] not in irregular and wordlist[3] != "it":
            if verb[-1] != "e":
                wordlist[3] = verb + "ed"
            else:
                wordlist[3] = verb + "d"
    for base, past in irregular_past.items():
        if past == wordlist[3] and wordlist[3] != "had" and tense != "present_who":
            wordlist[3] = "had " + participles.get(base, past)
            tense = "past_who"
    if wordlist[3] == "am" or wordlist[3] == "are" or wordlist[3] == "is":
        if wordlist[4] not in determiners:
            wordlist[3], wordlist[4] = wordlist[4], wordlist[3]
            if wordlist[3] == "we" or wordlist[3] == "they" or wordlist[3] == "you all":
                wordlist[4] = "were"
            else:
                wordlist[4] = "was"
        else:
            wordlist.append(wordlist[3])
            wordlist.remove(wordlist[3])
            noun = [*wordlist[4]]
            can_Add_participle_termination = False
            try:
                if noun[-1] == "s":
                    wordlist[5] = "were"
                else:
                    wordlist[5] = "was"
            except IndexError:
                pass
    if wordlist[3] == "aren't" or wordlist[3] == "isn't":
        if wordlist[4] not in determiners:
            wordlist[3], wordlist[4] = wordlist[4], wordlist[3]
            if wordlist[3] == "we" or wordlist[3] == "they" or wordlist[3] == "you all":
                wordlist[4] = "weren't"
            else:
                wordlist[4] = "wasn't"
        else:
            wordlist.append(wordlist[3])
            wordlist.remove(wordlist[3])
            noun = [*wordlist[4]]
            can_Add_participle_termination = False
            try:
                if noun[-1] == "s":
                    wordlist[5] = "weren't"
                else:
                    wordlist[5] = "wasn't"
            except IndexError:
                pass
for i in range(len(wordlist)):
    if wordlist[i] in whwords and questiontype == "yes-no":
        questiontype = "mixed"
        verb = wordlist[i+2]
        temp_term = [*verb]
        if wordlist[i+1] in modals:
            tense = "modal_who_mixed"
        if wordlist[i+2] in modals:
            tense = "modal_mixed"
        if temp_term[-1] != "d" and temp_term[-2] != "e" and verb not in irregular_past.values():
            if temp_term[-1] == "s" and temp_term[-2] != "s" and verb not in irregular:
                del temp_term[-1]
                verb = "".join(temp_term)
            if verb in irregular_past and tense != "modal_mixed" and tense != "modal_who_mixed":
                verb = irregular_past[verb]
                wordlist[i+2] = verb
            elif verb not in irregular and verb != "it" and tense != "modal_mixed" and tense != "modal_who_mixed":
                if verb[-1] != "e":
                    wordlist[i+2] = verb + "ed"
                else:
                    wordlist[i+2] = verb + "d"
            elif verb == "am" or verb == "are" or verb == "is":
                if wordlist[i+1] == "we" or wordlist[i+1] == "they" or wordlist[i+1] == "you all":
                    wordlist[i+2] = "were"
                else:
                    wordlist[i+2] = "was"
            elif verb == "was" or verb == "were":
                wordlist[i+2] = "had been"
            elif verb == "have" or verb == "has":
                if tense != "modal_who_mixed":
                    wordlist[i+2] = "had"
            elif verb == "it":
                if wordlist[i+3] == "is":
                    wordlist[i+3] = "was"
                elif wordlist[i+3] == "was":
                    wordlist[i+3] = "had been"
                elif wordlist[i+3] == "has":
                    wordlist[i+3] = "had"
        else:
            if temp_term[-1] == "d" and temp_term[-2] == "e":
                wordlist.insert(i+2, "had")
            elif verb in irregular_past.values():
                for base, past in irregular_past.items():
                    if past == verb and verb != "had":
                        verb = participles.get(base, past)
                        wordlist[i+2] = verb
                        wordlist.insert(i+2, "had")
if wordlist[2] == "Are" or wordlist[2] == "Is" or wordlist[2] == "Am" or wordlist[2] == "are" or wordlist[2] == "is" or wordlist[2] == "am":
    tense = "continuous"
if wordlist[2] == "Aren't" or wordlist[2] == "Isn't" or wordlist[2] == "aren't" or wordlist[2] == "isn't":
    tense = "negativecontinuous"
if wordlist[2] == "Were" or wordlist[2] == "were" or wordlist[2] == "Was" or wordlist[2] == "was":
    tense = "pastcontinuous"
if wordlist[2] == "Have" or wordlist[2] == "have" or wordlist[2] == "Has" or wordlist[2] == "has":
    tense = "perfect"
    wordlist.insert(4, "had")
if wordlist[2] in modals:
    tense = "modal"
if wordlist[3] in modals and questiontype == "wh":
    tense = "modal"
    if wordlist[4] not in determiners:
        wordlist[3], wordlist[4] = wordlist[4], wordlist[3]
    else:
        wordlist.insert(-1, wordlist[3])
        wordlist.remove(wordlist[3])
if wordlist[2] == "Did" or wordlist[2] == "did":
    tense = "pastsimple"
    wordlist.insert(4, "had")
    if wordlist[5] not in irregular:
        if verb[-1] != "e":
            wordlist[-2] = wordlist[-2] + "ed"
        else:
            wordlist[-2] = wordlist[-2] + "d"
if wordlist[2] == "Didn't" or wordlist[2] == "didn't":
    tense = "pastsimple"
    wordlist.insert(4, "hadn't")
    if wordlist[5] not in irregular:
        if verb[-1] != "e":
            wordlist[-2] = wordlist[-2] + "ed"
        else:
            wordlist[-2] = wordlist[-2] + "d"
if wordlist[2] == "Had" or wordlist[2] == "had":
    tense = "pastperfect"
try:
    if tense == "past" and questiontype == "wh":
        temp_word = wordlist[5]
        if temp_word in participles:
            wordlist[5] = participles[temp_word]
        elif temp_word in participles.values():
            pass
        elif temp_word != "come":
            if temp_word.endswith("e"):
                wordlist[5] = temp_word + "d"
            else:
                wordlist[5] = temp_word + "ed"
except IndexError:
    pass
if questiontype == "yes-no" or questiontype == "mixed":
    wordlist.insert(2, "if")
    if tense != "modal" and tense != "pastperfect":
        wordlist.remove(wordlist[3])
    else:
        wordlist[3], wordlist[4] = wordlist[4], wordlist[3]
elif tense != "perfect_who":
    if wordlist[3] == "had":
        wordlist[3], wordlist[4] = wordlist[4], wordlist[3]
    if wordlist[3] == "have":
        wordlist[3] = "had"
        wordlist[3], wordlist[4] = wordlist[4], wordlist[3]
    if wordlist[3] == "haven't":
        wordlist[3] = "hadn't"
        wordlist[3], wordlist[4] = wordlist[4], wordlist[3]
if wordlist[3] == "You" or wordlist[3] == "you" and single_wh_word == False:
    if wordlist[4] == "all":
        wordlist[3] = "you all"
        wordlist.remove(wordlist[4])
if wordlist[3] != "I" and wordlist[3] != "i" and wordlist[3] != "You" and wordlist[3] != "you" and wordlist[3] != "We" and wordlist[3] != "we" and wordlist[3] != "You all" and wordlist[3] != "They" and wordlist[3] != "they" and single_wh_word == False:
    if wordlist[4] == "is":
        wordlist[4] = "was"
try:
   if wordlist[4] not in irregular and tense == "present" and can_Add_participle_termination == True:
       if verb[-1] != "e":
           wordlist[4] = wordlist[4] + "ed"
       else:
           wordlist[4] = wordlist[4] + "d"
except IndexError:
    pass
if wordlist[3] == "were":
    if wordlist[2] == "he" or wordlist[2] == "she":
        wordlist[3] = "was"
try:
    if wordlist[4] in irregular_past:
        wordlist[4] = irregular_past[wordlist[4]]
except IndexError:
    pass 
if tense == "continuous":
    if wordlist[3] == "I" or wordlist[3] == "i" or wordlist[3] == "he" or wordlist[3] == "she" or wordlist[3] == "it":
        wordlist.insert(4, "was")
    if wordlist[3] == "you" or wordlist[3] == "we" or wordlist[3] == "they":
        wordlist.insert(4, "were")
if tense == "negativecontinuous":
    if wordlist[3] == "I" or wordlist[3] == "i" or wordlist[3] == "he" or wordlist[3] == "she" or wordlist[3] == "it":
        wordlist.insert(4, "wasn't")
    if wordlist[3] == "you" or wordlist[3] == "we" or wordlist[3] == "they":
        wordlist.insert(4, "weren't")     
if tense == "pastcontinuous":
    wordlist.insert(4, "had been")
for i in range(len(wordlist)):
    if wordlist[i] == "here":
        wordlist[i] = "there"
    if wordlist[i] == "today":
        wordlist[i] = "that day"
    if wordlist[i] == "now":
        wordlist[i] = "at the moment"
    if wordlist[i] == "yesterday":
        wordlist[i] = "the day before"
    if wordlist[i] == "ago":
        wordlist[i] = "before"
    if wordlist[i] == "tomorrow":
        wordlist[i] = "the next day"
    if wordlist[i] == "tonight":
        wordlist[i] = "that night"
    if wordlist[i] == "next":
        wordlist[i] = "the following"
    if wordlist[i] == "last":
        wordlist[i] = "the"
        wordlist.append("before")
    if wordlist[i] == "will" or wordlist[i] == "Will":
        wordlist[i] = "would"
    if wordlist[i] == "won't" or wordlist[i] == "Won't":
        wordlist[i] = "wouldn't"
    if wordlist[i] == "can" or wordlist[i] == "Can":
        wordlist[i] = "could"
    if wordlist[i] == "can't" or wordlist[i] == "Can't":
        wordlist[i] = "couldn't"
    if wordlist[i] == "may" or wordlist[i] == "May":
        wordlist[i] = "might"
    if wordlist[i] == "mayn't" or wordlist[i] == "Mayn't":
        wordlist[i] = "mightn't"
    if wordlist[i] == "shall" or wordlist[i] == "Shall":
        wordlist[i] = "should"
    if wordlist[i] == "shan't" or wordlist[i] == "Shan't":
        wordlist[i] = "shouldn't"
    if wordlist[i] == "must" or wordlist[i] == "Must":
        wordlist[i] = "had to"
    if wordlist[i] == "mustn't" or wordlist[i] == "Mustn't":
        wordlist[i] = "wasn't allowed to"
    if wordlist[i] == "haven't" or wordlist[i] == "Haven't" or wordlist[i] == "hasn't" or wordlist[i] == "Hasn't":
        wordlist[i] = "hadn't"
    if wordlist[i] == "don't" or wordlist[i] == "Don't" or wordlist[i] == "doesn't" or wordlist[i] == "Doesn't":
        wordlist[i] = "didn't"    
    if wordlist[i] == "wasn't" or wordlist[i] == "Wasn't" or wordlist[i] == "weren't" or wordlist[i] == "Weren't":
        if tense != "negativecontinuous":
            wordlist[i] = "hadn't been"    
    if wordlist[i] == "Would":
        wordlist[i] = "would"
    if wordlist[i] == "Wouldn't":
        wordlist[i] = "wouldn't"
    if wordlist[i] == "Might":
        wordlist[i] = "might"
    if wordlist[i] == "Mightn't":
        wordlist[i] = "mightn't"
    if wordlist[i] == "Could":
        wordlist[i] = "could"
    if wordlist[i] == "Couldn't":
        wordlist[i] = "couldn't"
    if wordlist[i] == "Should":
        wordlist[i] = "should"
    if wordlist[i] == "Shouldn't":
        wordlist[i] = "shouldn't"
    if wordlist[i] == "Had":
        wordlist[i] = "had"
    if wordlist[i] == "Hadn't":
        wordlist[i] = "hadn't"
    if wordlist[i] == "Didn't":
        wordlist[i] = "didn't"
print("Reported Question translation: " + ' '.join(wordlist))
</py-script>
</body>

</html>
